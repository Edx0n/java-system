<div class="product-form-container">
  <div class="form-header">
    <h2>{{ product ? "Edit Product" : "Add New Product" }}</h2>
  </div>

  <div *ngIf="error()" class="error-message">
    {{ error() }}
  </div>

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Product Name *</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control"
        [class.invalid]="f['name'].invalid && f['name'].touched"
      />
      <div
        *ngIf="f['name'].invalid && f['name'].touched"
        class="error-text"
      >
        <small *ngIf="f['name'].errors?.['required']"
          >Product name is required</small
        >
        <small *ngIf="f['name'].errors?.['minlength']"
          >Product name must be at least 3 characters</small
        >
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
        rows="3"
      ></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="quantity">Quantity *</label>
        <input
          type="number"
          id="quantity"
          formControlName="quantity"
          class="form-control"
          [class.invalid]="f['quantity'].invalid && f['quantity'].touched"
        />
        <div
          *ngIf="f['quantity'].invalid && f['quantity'].touched"
          class="error-text"
        >
          <small *ngIf="f['quantity'].errors?.['required']"
            >Quantity is required</small
          >
          <small *ngIf="f['quantity'].errors?.['min']"
            >Quantity must be zero or positive</small
          >
        </div>
      </div>

      <div class="form-group">
        <label for="price">Price (USD) *</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          class="form-control"
          step="0.01"
          [class.invalid]="f['price'].invalid && f['price'].touched"
        />
        <div
          *ngIf="f['price'].invalid && f['price'].touched"
          class="error-text"
        >
          <small *ngIf="f['price'].errors?.['required']"
            >Price is required</small
          >
          <small *ngIf="f['price'].errors?.['min']"
            >Price must be zero or positive</small
          >
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="onCancel()"
        [disabled]="loading()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="productForm.invalid || loading()"
      >
        {{ loading() ? "Saving..." : product ? "Update" : "Create" }}
      </button>
    </div>
  </form>
</div>

